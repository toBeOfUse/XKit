{"id":"separator","script":"//* TITLE Separator **//\n//* VERSION 1.1.6 **//\n//* DESCRIPTION Where were we again? **//\n//* DEVELOPER STUDIOXENIX **//\n//* DETAILS A simple extension that puts a divider showing where you left off on your dashboard. **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.separator = new Object({\n\n\trunning: false,\n\n\tcheck_for: \"\",\n\n\tpreferences: {\n\n\t\t\"bold_line\": {\n\t\t\ttext: \"Use the thick line for separating\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\n\t\t\"jump_to\": {\n\t\t\ttext: \"Show the \\\"Jump to Separator\\\" button (only works when endless scrolling is off)\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\n\t},\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif (XKit.interface.where().dashboard !== true) {return; }\n\n\t\tXKit.tools.init_css(\"separator\");\n\n\t\tif (XKit.extensions.separator.preferences.bold_line.value === true) {\n\n\t\t\tXKit.tools.add_css(\" #xkit-post-separator { border-top: 3px solid rgba(255,255,255,0.33) !important; border-bottom: 0 !important; } \", \"separator-thick\");\n\n\t\t}\n\n\t\tif (XKit.extensions.separator.preferences.jump_to.value === true) {\n\n\t\t\tXKit.interface.sidebar.add({\n\t\t\t\tid: \"separator_sidebar\",\n\t\t\t\ttitle: \"Separator\",\n\t\t\t\titems: [{\n\t\t\t\t\tid: \"separator_button\",\n\t\t\t\t\ttext: \"Go to last viewed post\",\n\t\t\t\t\tcarrot: true\n\t\t\t\t}]\n\t\t\t});\n\n\n\t\t\t$(\"#separator_button\").click(function() {\n\n\t\t\t\tif ($(\"#xkit-post-separator\").length > 0) {\n\n\t\t\t\t\t$('html,body').animate({\n\t\t\t\t\t\tscrollTop: $(\"#xkit-post-separator\").offset().top\n\t\t\t\t\t}, 1000);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdocument.location = \"http://www.tumblr.com/dashboard/100/\" + (XKit.extensions.separator.check_for + 1);\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t}\n\n\t\tvar last_loaded_post = XKit.storage.get(\"separator\", \"last_post\", \"\");\n\n\t\tvar current_last_post = $(\"body\").find(\".posts .post\").not(\"#tumblr_radar\").not(\".new_post_buttons\").first();\n\n\t\t//$(last_loaded_post).css(\"background\",\"red\");\n\n\t\tif (last_loaded_post !== \"\") {\n\n\t\t\tXKit.extensions.separator.check_for = last_loaded_post;\n\n\t\t\tif ($(\"#post_\" + last_loaded_post).length > 0) {\n\n\t\t\t\tXKit.extensions.separator.insert($(\"#post_\" + last_loaded_post));\n\n\t\t\t} else {\n\n\t\t\t\t// Is it deleted?\n\t\t\t\tif (XKit.extensions.separator.check_if_passed() === true) {\n\n\t\t\t\t\tvar find_closest = true;\n\n\t\t\t\t\tif (typeof XKit.interface.where().endless !== \"undefined\") {\n\t\t\t\t\t\tif (XKit.interface.where().endless === false) {\n\t\t\t\t\t\t\tfind_closest = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (find_closest) {\n\t\t\t\t\t\tXKit.extensions.separator.find_closest(100);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar current_last = $(\".posts .post\").first();\n\t\t\t\t\t\tvar current_last_id = $(current_last).attr('data-post-id');\n\t\t\t\t\t\tif (current_last_id < XKit.extensions.separator.check_for) {\n\t\t\t\t\t\t\tXKit.extensions.separator.find_closest(100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Probably after scrolling.\n\t\t\t\t\tXKit.post_listener.add(\"separator\", XKit.extensions.separator.post_listener);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tXKit.storage.set(\"separator\", \"last_post\", $(current_last_post).attr('data-post-id'));\n\n\t},\n\n\tfind_closest: function(distance) {\n\n\t\tvar found_post = false;\n\n\t\tif (distance >= 5000000000) { return; }\n\n\t\t$(\".posts .post\").not(\"#new_post\").each(function() {\n\n\t\t\tvar m_id = $(this).attr('data-post-id');\n\n\t\t\tif (m_id >= XKit.extensions.separator.check_for - distance && m_id <= XKit.extensions.separator.check_for + distance) {\n\n\t\t\t\tXKit.extensions.separator.insert($(this));\n\t\t\t\tfound_post = true;\n\n\t\t\t\ttry {\n\t\t\t\t\t// Just in case.\n\t\t\t\t\tXKit.post_listener.remove(\"separator\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(\"Unable to remove separator post listener.\");\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t});\n\n\t\tif (found_post) { return; }\n\n\t\tXKit.extensions.separator.find_closest(distance * 5);\n\n\n\t},\n\n\tcheck_if_passed: function() {\n\n\t\tvar current_last = $(\".posts .post\").last();\n\t\tvar current_last_id = $(current_last).attr('data-post-id');\n\n\t\tif (current_last_id < XKit.extensions.separator.check_for) {\n\n\t\t\t// We scrolled way too much but still there is no post.\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t},\n\n\tpost_listener: function() {\n\n\t\tif ($(\"#post_\" + XKit.extensions.separator.check_for).length > 0) {\n\n\t\t\tXKit.extensions.separator.insert($(\"#post_\" + XKit.extensions.separator.check_for));\n\t\t\tXKit.post_listener.remove(\"separator\");\n\n\t\t} else {\n\n\t\t\t// It was probably deleted? Let's check for that.\n\t\t\tXKit.extensions.separator.find_closest(100);\n\n\t\t}\n\n\t},\n\n\tinsert: function(div) {\n\n\t\t$(div).parent().before(\"<div id=\\\"xkit-post-separator\\\">Here!</div>\");\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\t$(\"#xkit-post-separator\").remove();\n\t\tXKit.interface.sidebar.remove(\"separator_sidebar\");\n\t\tXKit.post_listener.remove(\"separator\");\n\t\tXKit.tools.remove_css(\"separator\");\n\t\tXKit.tools.remove_css(\"separator-thick\");\n\t}\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNTEwQjYxNzRGNzExMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNTEwQjYxNjRGNzExMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MT3W1AAAAMdJREFUeNrsmcENhDAMBGOSH5XQw304iXJpAT70cNWccldAHkgIOYuHCjzaXdsxto41KX/FBun6k3j5fwWSAeAMIG6iYkaIyUBoC+mHGAuhQHgLZboQ74HYAFiINnoRYMhYiBAHnwPyqwTLHArcoMDne3RY65RfZ7uQ1R51aZe6zY3/A/PWo1v2t/ogayqwL/WBIZYCkD+roIA3QGGVcH5SogBzAAUAAOBSBjireANwmQOAEGMh33WaQYaFogOQASwU20I/AQYAj6wNUn2YSRcAAAAASUVORK5CYII=","css":"#xkit-post-separator {\n\n\tborder-top: 1px dotted rgba(0,0,0,0.33);\n\tborder-bottom: 1px dotted rgba(255,255,255,0.23);\n\theight: 0px;\n\toverflow: hidden;\n\tmargin-top: 10px;\n\tmargin-bottom: 20px;\n\n}\n","title":"Separator","description":"Where were we again?","developer":"STUDIOXENIX","version":"1.1.6","details":"A simple extension that puts a divider showing where you left off on your dashboard.","frame":"false","beta":"false","slow":"false"}